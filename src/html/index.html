<script type="text/hoplon">
  (ns tailrecursion.presioke.index
    (:require-macros
      [tailrecursion.javelin.macros :refer [cell]])
    (:require
      tailrecursion.javelin
      [tailrecursion.castra :refer [async]]))

  (def images
    (cell '["http://media.desura.com/cache/images/members/1/365/364567/thumb_940x3000/welcome_to_the_internet.jpg"]))

  (def cursor (cell 0))

  (def current-image (cell (get images cursor)))

  (def api-key "d4fbe84122c1fb2c58dcdd974f5e46ef")

  (async ["tailrecursion.presioke.flickr/get-interesting" api-key]
    #(swap! images into %))
</script>

<html>
  <head>
    <title>Presioke</title>
  </head>
  <body>
    <img do="(d/attr! :src current-image)"></img>
  </body>
</html>
